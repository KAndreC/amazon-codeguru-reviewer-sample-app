name: sync up to codecommit
on:
    push:
        tags-ignore:
            - '*'
        branches:
            - feature/CICDPythonCodeguru
jobs:
    sync:
        runs-on: ubuntu-latest
        steps:
          - name: Checkout
            uses: actions/checkout@main
            with:
              fetch-depth: 0

          - name: Configure AWS Credentials
            uses: aws-actions/configure-aws-credentials@main
            with:
              aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
              aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
              aws-region: us-east-2
          # - name: Sync up to CodeCommit
          #   uses: KAndreC/amazon-codeguru-reviewer-sample-app@feature/CICDPythonCodeguru
          #   with:
          #     repository_name: DemoPythonRepo
          #     aws_region: us-east-2
          - name: CodeGuru Reviewer
            uses: aws-actions/codeguru-reviewer@v1.1
            with:
              #build_path: target # build artifact(s) directory
              s3_bucket: codeguru-reviewer-demo-python-repo-bucket # S3 Bucket with "codeguru-reviewer-*" prefix
          - name: Upload review result
            uses: github/codeql-action/upload-sarif@v2
            with:
              sarif_file: codeguru-results.sarif.json
    # associate:
    #     runs-on: ubuntu-latest
    #     steps:
    #       - name: Checkout
    #         uses: actions/checkout@main
    #         with:
    #           fetch-depth: 0
    #       - name: Configure AWS Credentials
    #         uses: aws-actions/configure-aws-credentials@main
    #         with:
    #           aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
    #           aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
    #           aws-region: us-east-1
    #       - name: Associate with CodeGuru Reviewer
    #         uses: aws-actions/codeguru-reviewer-associate-repository@v1
    #         with:
    #           repository_name: DemoPythonRepo
    #           provider-type: CodeCommit

        
          
